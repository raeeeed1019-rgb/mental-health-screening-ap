import streamlit as st

# ================= ุฅุนุฏุงุฏ ุนุงู ููุตูุญุฉ ================
st.set_page_config(
    page_title="ููุตูุฉ ุฏุนู ุงูููู ูุงูุงูุชุฆุงุจ",
    page_icon="๐",
    layout="centered"
)

# ===================== ุชูุณููุงุช ุนุงูุฉ (CSS) =====================
def set_style():
    st.markdown("""
    <style>
        .main {
            background-color: #f5f7fb;
            font-family: "Cairo", sans-serif;
        }

        .app-header {
            background: linear-gradient(90deg, #1f4e79, #3b82f6);
            padding: 16px 24px;
            border-radius: 18px;
            display: flex;
            align-items: center;
            gap: 14px;
            margin-bottom: 24px;
            color: #ffffff;
        }

        .logo-circle {
            width: 54px;
            height: 54px;
            border-radius: 50%;
            background: rgba(255,255,255,0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
        }

        .header-title {
            font-size: 24px;
            font-weight: 700;
        }

        .header-subtitle {
            font-size: 14px;
            opacity: 0.9;
        }

        .page-note {
            text-align: center;
            color: #555;
            margin-bottom: 10px;
        }

        .question {
            font-size: 18px;
            color: #222;
            margin-top: 12px;
            margin-bottom: 4px;
        }
    </style>
    """, unsafe_allow_html=True)

set_style()

# ===================== ุงูููุฏุฑ / ุงูุดุนุงุฑ =====================
st.markdown(
    """
    <div class="app-header">
        <div class="logo-circle">๐ง</div>
        <div>
            <div class="header-title">ููุตูุฉ ุฏุนู ุงูููู ูุงูุงูุชุฆุงุจ</div>
            <div class="header-subtitle">
                ุชูููู ุฐุงุชู ุฃูููู ูุน ุฑุณุงูุฉ ููุฏูู ุฎุงุตุฉ ูุฏุนู ุตุญุชู ุงูููุณูุฉ ๐
            </div>
        </div>
    </div>
    """,
    unsafe_allow_html=True,
)

st.markdown(
    "<div class='page-note'>ูุฐู ุงูุฃุฏุงุฉ ูุง ุชูุนุชุจุฑ ุชุดุฎูุตูุง ุทุจููุงุ ูุฅููุง ูุณููุฉ ููุณุงุนุฏุชู ุนูู ููู ุญุงูุชู ุงูุญุงููุฉ.</div>",
    unsafe_allow_html=True,
)

# ===================== ููุฏูู ุงูููุฏููุฉ (ูู ุงูููู ุงูุฐู ุฑูุนุชู) =====================
video_path = "ูุต ููุฑุชู.mp4"  # ุงุณู ููู ุงูููุฏูู ููุง ูู ูู GitHub

try:
    with open(video_path, "rb") as video_file:
        intro_video = video_file.read()
    st.video(intro_video)
except FileNotFoundError:
    st.warning("ูู ูุชู ุงูุนุซูุฑ ุนูู ููู ุงูููุฏูู (ูุต ููุฑุชู.mp4). ุชุฃูุฏ ุฃู ุงุณูู ุตุญูุญ ุฏุงุฎู ุงููุณุชูุฏุน.")

st.write("---")

# ===================== ุฃุณุฆูุฉ ุงูุชูููู =====================

st.subheader("๐ ุงุฎุชุจุงุฑ ุจุณูุท ููููู ูุงูุงูุชุฆุงุจ")

st.write("ุงุฎุชุฑ ุงูุฅุฌุงุจุฉ ุงูุชู ุชุนุจูุฑ ุนูู ุฎูุงู **ุงูุฃุณุจูุนูู ุงููุงุถููู**:")

questions = [
    "ุฃุดุนุฑ ุจุงูููู ูุนุธู ุงูููุช.",
    "ุฃุฌุฏ ุตุนูุจุฉ ูู ุงูุชููู ุนู ุงูุชูููุฑ ุฃู ุงูููู.",
    "ุฃุดุนุฑ ุจุฃู ุงููุชุนุฉ ูู ุงูุฃูุดุทุฉ ุงูููููุฉ ููููุฉ ุฃู ููููุฏุฉ.",
    "ูุฒุงุฌู ููุฎูุถ ุฃู ุฃุดุนุฑ ุจุงูุญุฒู ุฎูุงู ุงูููู.",
    "ุฃูุงู ุจุตุนูุจุฉ ุฃู ูููู ูุชูุทูุน ุจุณุจุจ ุงูุชูููุฑ.",
    "ุฃุดุนุฑ ุจุงูุชูุชุฑ ุฃู ุงูุนุตุจูุฉ ุจุฏูู ุณุจุจ ูุงุถุญ.",
    "ุฃุดุนุฑ ุจุงูุชุนุจ ูููุฉ ุงูุทุงูุฉ ูุนุธู ุงูุฃูุงู.",
    "ุฃุดุนุฑ ุจุงูุชุดุงุคู ุฃู ุงูุฎูู ูู ุงููุณุชูุจู."
]

options = ["ุฃุจุฏูุง", "ุฃุญูุงููุง", "ุบุงูุจูุง", "ุฏุงุฆููุง"]
score_map = {"ุฃุจุฏูุง": 0, "ุฃุญูุงููุง": 1, "ุบุงูุจูุง": 2, "ุฏุงุฆููุง": 3}

answers = []
for i, q in enumerate(questions, start=1):
    st.markdown(f"<div class='question'>{i}. {q}</div>", unsafe_allow_html=True)
    ans = st.radio(
        label=f"q{i}",
        options=options,
        index=0,
        horizontal=True,
        label_visibility="collapsed",
        key=f"q{i}"
    )
    answers.append(ans)

score = sum(score_map[a] for a in answers)

st.write("---")

# ===================== ุงููุชูุฌุฉ ูุนุฑุถ ููุฏูู ููุชููุจ =====================

YOUTUBE_URL = "https://www.youtube.com/watch?v=ZnuLmUWKros"  # ููุณ ุงูุฑุงุจุท ููุฅูุฌุงุจู ูุงูุณูุจู

if st.button("ุนุฑุถ ุงููุชูุฌุฉ ๐ฏ"):
    st.write("## ูุชูุฌุชู:")

    if score <= 6:
        st.success("ูุชูุฌุชู ููุฎูุถุฉ โ ูุคุดุฑุงุช ุงูููู ูุงูุงูุชุฆุงุจ ูุฏูู ุจุณูุทุฉ ุฃู ุถูู ุงููุทุงู ุงูุทุจูุนู ุจุฅุฐู ุงููู ๐")
        st.write(
            "ุงุณุชูุฑ ูู ุงูุงูุชูุงู ุจููุณู ูููุท ุญูุงุชูุ ูุงูููู ุงูุฌูุฏุ "
            "ูุงููุฑุจ ูู ุงูุฃุดุฎุงุต ุงูุฏุงุนููู ูู. ุดุงูุฏ ูุฐู ุงูุฑุณุงูุฉ ุงูุชุญููุฒูุฉ:"
        )
        st.video(YOUTUBE_URL)
    elif 7 <= score <= 14:
        st.warning("ุชูุฌุฏ ุจุนุถ ุงูุนูุงูุงุช ุงููุชูุณุทุฉ ููููู ุฃู ุงูุงูุชุฆุงุจ.")
        st.write(
            "ูู ุงูุฌูุฏ ุฃู ุชุนุทู ูููุณู ูุฑุตุฉ ููุฑุงุญุฉุ ูุชุฑุชูุจ ููููุ "
            "ูุงูุชุญุฏุซ ูุน ุดุฎุต ุชุซู ุจู. ุดุงูุฏ ูุฐุง ุงูููุทุน ููุฒูุฏ ูู ุงูุฏุนู:"
        )
        st.video(YOUTUBE_URL)
    else:
        st.error("ุงููุชูุฌุฉ ุชุดูุฑ ุฅูู ูุณุชูู ุนุงูู ูู ุงูุฃุนุฑุงุถุ ูููุถูู ุงุณุชุดุงุฑุฉ ูุฎุชุต ูู ุงูุตุญุฉ ุงูููุณูุฉ.")
        st.write(
            "ูู ุงูููู ุนุฏู ุชุฌุงูู ูุดุงุนุฑูุ ุญุฏุฏ ููุนุฏูุง ูุน ุฃุฎุตุงุฆู ููุณู ุฃู ุทุจูุจุ "
            "ูุชุฐูุฑ ุฃู ุทูุจ ุงููุณุงุนุฏุฉ ููุฉ ูููุณ ุถุนููุง. ุฅููู ูุฐุง ุงูููุทุน ููุณุงูุฏุชู:"
        )
        st.video(YOUTUBE_URL)

    st.info("โ๏ธ ูุฐู ุงูุฃุฏุงุฉ ูุจุฏุฆูุฉ ููุท ููุง ุชุบูู ุนู ุชุดุฎูุต ุฃู ูุชุงุจุนุฉ ูู ูุฎุชุต ูู ุงูุตุญุฉ ุงูููุณูุฉ.")
