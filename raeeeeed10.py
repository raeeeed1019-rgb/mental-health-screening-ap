import streamlit as st

# ---------------- ุฅุนุฏุงุฏ ุนุงู ููุตูุญุฉ ----------------
st.set_page_config(
    page_title="ููุตูุฉ ุฏุนู ุงูููู ูุงูุงูุชุฆุงุจ",
    page_icon="๐",
    layout="centered"
)

# ---------------- ุชูุณููุงุช ุจุณูุทุฉ ----------------
def set_style():
    st.markdown("""
        <style>
        .main {
            background-color: #f5f7fb;
            font-family: "Cairo", sans-serif;
        }
        .title {
            text-align: center;
            color: #1f4e79;
        }
        .subtitle {
            text-align: center;
            color: #555555;
        }
        .stButton>button {
            width: 100%;
            padding: 0.75rem;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 600;
        }
        </style>
    """, unsafe_allow_html=True)

set_style()

# ---------------- ุฏูุงู ุงูุฃุณุฆูุฉ ----------------

OPTIONS = [
    "ุฃุจุฏูุง",          
    "ุนุฏุฉ ุฃูุงู",       
    "ุฃูุซุฑ ูู ูุตู ุงูุฃูุงู",  
    "ุชูุฑูุจูุง ูู ููู" 
]

def likert_question(label: str):
    return st.radio(label, OPTIONS, horizontal=True)

def score_answer(ans: str) -> int:
    mapping = {
        "ุฃุจุฏูุง": 0,
        "ุนุฏุฉ ุฃูุงู": 1,
        "ุฃูุซุฑ ูู ูุตู ุงูุฃูุงู": 2,
        "ุชูุฑูุจูุง ูู ููู": 3
    }
    return mapping.get(ans, 0)

# ---------------- ุฏูุงู ุนุฑุถ ุงููุชุงุฆุฌ ----------------

def show_motivation(score, max_score, level_text):
    st.success(f"ูุณุชูู ุงูุฃุนุฑุงุถ: {level_text}")
    st.write(f"ุฅุฌูุงูู ุงูุฏุฑุฌุฉ: **{score} ูู {max_score}**")
    st.markdown("""
    ุชุจุฏู ูุคุดุฑุงุชู ูู ุงููุทุงู ุงูุฎููู ุฃู ุงูููุจูู ๐ฟ  
    ุงุณุชูุฑ ูู ุงูุงูุชูุงู ุจุตุญุชู ุงูููุณูุฉุ ูุฎุฐ ูุณุทูุง ูู ุงูุฑุงุญุฉุ ูุงุนุชูู ุจูููู ูุบุฐุงุฆู ูุนูุงูุงุชู ุงูุงุฌุชูุงุนูุฉ ๐
    """)
    st.video("https://www.youtube.com/watch?v=ZnuLmUWKros")   # ุงูููุฏูู ุงูุฅูุฌุงุจู ๐

def show_educational(score, max_score, level_text):
    st.error(f"ูุณุชูู ุงูุฃุนุฑุงุถ: {level_text}")
    st.write(f"ุฅุฌูุงูู ุงูุฏุฑุฌุฉ: **{score} ูู {max_score}**")
    st.markdown("""
    ุชุดูุฑ ูุฐู ุงูุฏุฑุฌุฉ ุฅูู ุงุญุชูุงู ูุฌูุฏ ุฃุนุฑุงุถ ุชุญุชุงุฌ ุฅูู ุงูุชูุงู ุฃูุจุฑ ๐  
    ูู ุงูููู ุงูุชูููุฑ ูู:
    - ุงูุชุญุฏุซ ูุน ุดุฎุต ุชุซู ุจู  
    - ูุฑุงุฌุนุฉ ุทุจูุจ ุฃู ุฃุฎุตุงุฆู ููุณู  
    - ุนุฏู ุชุฌุงูู ุงููุดุงุนุฑ ููุชุฑุฉ ุทูููุฉ  

    ๐น ูุฐู ุงูุฃุฏุงุฉ ูููุญุต ุงูุฃููู ููุทุ ูููุณุช ุชุดุฎูุตูุง ุทุจููุง.  
    """)
    st.video("https://www.youtube.com/watch?v=U7U4iR2_y1I")   # ุงูููุฏูู ุงูุชูุนูู โ๏ธ
    st.info("โ๏ธ ุฅุฐุง ุงุณุชูุฑุช ุงูุฃุนุฑุงุถ ุฃู ุฃุซูุฑุช ูู ุญูุงุชู ุงูููููุฉุ ุงูุฑุฌุงุก ูุฑุงุฌุนุฉ ูุฎุชุต ูู ุงูุตุญุฉ ุงูููุณูุฉ.")

# ---------------- ุงููุงุฌูุฉ ----------------

st.markdown('<h1 class="title">ููุตูุฉ ูุญุต ุงูููู ูุงูุงูุชุฆุงุจ (GAD-7 / PHQ-9)</h1>', unsafe_allow_html=True)
st.markdown('<p class="subtitle">ูุฐู ุงูุฃุฏุงุฉ ุชุณุงุนุฏู ุนูู ุชูููู ูุณุชูู ุงูุฃุนุฑุงุถ ุจุดูู ุฃููููุ ููุง ุชูุบูู ุนู ุงุณุชุดุงุฑุฉ ุงููุฎุชุตูู.</p>', unsafe_allow_html=True)

st.write("---")

choice = st.selectbox(
    "ุงุฎุชุฑ ุงููููุฐุฌ ุงูุฐู ุชุฑูุฏ ุชุนุจุฆุชู:",
    ["ุงุฎุชุฑ...", "ูููุงุณ ุงูููู GAD-7", "ูููุงุณ ุงูุงูุชุฆุงุจ PHQ-9"]
)

st.write("---")

# =====================================================
#  ูููุงุณ ุงูููู GAD-7
# =====================================================
if choice == "ูููุงุณ ุงูููู GAD-7":
    st.header("๐ ูููุงุณ ุงูููู ุงูุนุงู GAD-7")
    st.markdown("**ุฎูุงู ุงูุฃุณุจูุนูู ุงููุงุถูููุ ุฅูู ุฃู ูุฏู ุงูุทุจู ุนููู ูุง ูููุ**")

    q1 = likert_question("1. ุงูุดุนูุฑ ุจุงูุชูุชุฑ ุฃู ุงูููู ุฃู ุงูุนุตุจูุฉ.")
    q2 = likert_question("2. ุนุฏู ุงููุฏุฑุฉ ุนูู ุฅููุงู ุฃู ุงูุชุญูู ูู ุงูููู.")
    q3 = likert_question("3. ุงูููู ุงูููุฑุท ุนูู ุฃุดูุงุก ูุฎุชููุฉ.")
    q4 = likert_question("4. ููุงุฌูุฉ ุตุนูุจุฉ ูู ุงูุงุณุชุฑุฎุงุก.")
    q5 = likert_question("5. ุงูุชูููู ูุฏุฑุฌุฉ ุชุฌุนู ูู ุงูุตุนุจ ุงูุฌููุณ ุจูุฏูุก.")
    q6 = likert_question("6. ุงูุดุนูุฑ ุจุณูููุฉ ุงูุงูุฒุนุงุฌ ุฃู ุงูุนุตุจูุฉ.")
    q7 = likert_question("7. ุงูุดุนูุฑ ุจุงูุฎูู ููุง ูู ุฃู ุดูุฆูุง ุณูุฆูุง ูุฏ ูุญุฏุซ.")

    if st.button("ุนุฑุถ ุงููุชูุฌุฉ ููููุงุณ ุงูููู GAD-7"):
        answers = [q1, q2, q3, q4, q5, q6, q7]
        score = sum(score_answer(a) for a in answers)
        max_score = 21

        if score <= 4:
            show_motivation(score, max_score, "ููู ูุนุฏูู ุฃู ุฎููู ุฌุฏูุง")
        elif 5 <= score <= 9:
            show_motivation(score, max_score, "ููู ุฎููู")
        elif 10 <= score <= 14:
            show_educational(score, max_score, "ููู ูุชูุณูุท (ููุตู ุจุงุณุชุดุงุฑุฉ ูุฎุชุต)")
        else:
            show_educational(score, max_score, "ููู ุดุฏูุฏ (ุฑุงุฌุน ูุฎุชุตูุง ูู ุฃูุฑุจ ููุช)")

# =====================================================
#  ูููุงุณ ุงูุงูุชุฆุงุจ PHQ-9
# =====================================================
elif choice == "ูููุงุณ ุงูุงูุชุฆุงุจ PHQ-9":
    st.header("๐ง๏ธ ูููุงุณ ุงูุงูุชุฆุงุจ PHQ-9")
    st.markdown("**ุฎูุงู ุงูุฃุณุจูุนูู ุงููุงุถูููุ ุฅูู ุฃู ูุฏู ุงูุทุจู ุนููู ูุง ูููุ**")

    q1 = likert_question("1. ููุฉ ุงูุงูุชูุงู ุฃู ุงููุชุนุฉ ูู ูุนู ุงูุฃุดูุงุก.")
    q2 = likert_question("2. ุงูุดุนูุฑ ุจุงูุงูุชุฆุงุจ ุฃู ุงูุฅุญุจุงุท ุฃู ุงููุฃุณ.")
    q3 = likert_question("3. ุตุนูุจุฉ ูู ุงูููู ุฃู ุงูููู ููุชุฑุงุช ุทูููุฉ ุฃู ุงูููู ุจุดูู ููุฑุท.")
    q4 = likert_question("4. ุงูุดุนูุฑ ุจุงูุชุนุจ ุฃู ููุฉ ุงูุทุงูุฉ.")
    q5 = likert_question("5. ููุฉ ุงูุดููุฉ ุฃู ุงูุฃูู ุงูููุฑุท.")
    q6 = likert_question("6. ุงูุดุนูุฑ ุจุณูุก ุนู ููุณู ุฃู ุฃูู ูุงุดู.")
    q7 = likert_question("7. ุตุนูุจุฉ ูู ุงูุชุฑููุฒ.")
    q8 = likert_question("8. ุงูุญุฑูุฉ ุฃู ุงูููุงู ุจุจุทุก ุฃู ุงูุนูุณ.")
    q9 = likert_question("9. ุฃููุงุฑ ุจุฃูู ุณุชููู ุฃูุถู ุญุงููุง ูู ูุชูู ุฃู ุจุฅูุฐุงุก ููุณู.")

    if st.button("ุนุฑุถ ุงููุชูุฌุฉ ููููุงุณ ุงูุงูุชุฆุงุจ PHQ-9"):
        answers = [q1, q2, q3, q4, q5, q6, q7, q8, q9]
        score = sum(score_answer(a) for a in answers)
        max_score = 27

        if score <= 4:
            show_motivation(score, max_score, "ูุง ููุฌุฏ ุงูุชุฆุงุจ ุฃู ุงูุชุฆุงุจ ุจุณูุท ุฌุฏูุง")
        elif 5 <= score <= 9:
            show_motivation(score, max_score, "ุงูุชุฆุงุจ ุฎููู")
        elif 10 <= score <= 14:
            show_educational(score, max_score, "ุงูุชุฆุงุจ ูุชูุณูุท")
        elif 15 <= score <= 19:
            show_educational(score, max_score, "ุงูุชุฆุงุจ ูุชูุณูุท ุฅูู ุดุฏูุฏ")
        else:
            show_educational(score, max_score, "ุงูุชุฆุงุจ ุดุฏูุฏ (ูุฌุจ ูุฑุงุฌุนุฉ ูุฎุชุต ุนุงุฌู)")

else:
    st.info("โฌ๏ธ ูู ูุถูู ุงุฎุชุฑ ููุน ุงููููุงุณ ููุงุณุชูุฑุงุฑ.")
